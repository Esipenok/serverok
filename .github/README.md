# Настройка автоматического деплоя через GitHub Actions

Этот проект настроен на автоматическое обновление сервера при каждом пуше в ветку `master`.

## Необходимые настройки

Для работы автоматического деплоя необходимо добавить секреты в настройках репозитория GitHub:

1. Перейдите в настройки репозитория на GitHub: `Settings` -> `Secrets and variables` -> `Actions`
2. Добавьте следующие секреты:

   - `SSH_PRIVATE_KEY`: Приватный SSH ключ для доступа к серверу (содержимое файла id_ed25519 или id_rsa)
   - `SSH_USER`: Имя пользователя для SSH (например, `root`)
   - `SERVER_IP`: IP-адрес сервера (например, `46.62.131.90`)
   - `SERVER_PATH`: Путь к директории проекта на сервере (например, `/root/app`)

## Как это работает

1. При каждом пуше в ветку `master` запускается GitHub Actions workflow
2. Код проекта скачивается в среду GitHub Actions
3. Создается архив с кодом проекта (исключая ненужные файлы)
4. Архив и скрипт деплоя копируются на сервер по SSH
5. Скрипт деплоя запускается на сервере и выполняет:
   - Создание резервной копии
   - Остановку Docker-контейнеров
   - Распаковку новой версии
   - Установку зависимостей
   - Запуск контейнеров
   - Проверку работоспособности API

## Просмотр логов деплоя

Логи процесса деплоя можно посмотреть во вкладке "Actions" репозитория на GitHub.

## Ручной запуск деплоя

Если необходимо запустить деплой вручную:

1. Перейдите во вкладку "Actions" репозитория на GitHub
2. Выберите workflow "Deploy to Production Server"
3. Нажмите "Run workflow" и выберите ветку `master` 