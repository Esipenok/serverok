# üöÄ –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Dating App

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Prometheus, Grafana –∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–æ–≤.

## üéØ –ß—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–º

- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: HTTP –∑–∞–ø—Ä–æ—Å—ã, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞, –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏
- **Redis**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏, –∫–æ–º–∞–Ω–¥—ã, hit rate
- **Kafka**: –°–æ–æ–±—â–µ–Ω–∏—è, –ª–∞–≥ –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤, —Ç–æ–ø–∏–∫–∏
- **–°–∏—Å—Ç–µ–º–∞**: CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, —Å–µ—Ç—å

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
./scripts/start-monitoring.sh

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
node tests/test-metrics.js
```

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

| –°–µ—Ä–≤–∏—Å | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|----------|
| **Grafana** | http://localhost:3001 | –î–∞—à–±–æ—Ä–¥—ã (admin/admin123) |
| **Prometheus** | http://localhost:9090 | –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ |
| **App Metrics** | http://localhost:3000/metrics | –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| **Redis Exporter** | http://localhost:9121/metrics | –ú–µ—Ç—Ä–∏–∫–∏ Redis |
| **Kafka Exporter** | http://localhost:9308/metrics | –ú–µ—Ç—Ä–∏–∫–∏ Kafka |
| **Node Exporter** | http://localhost:9100/metrics | –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ |

## üìà –î–∞—à–±–æ—Ä–¥—ã Grafana

1. **Dating App Overview** - –û–±—â–∏–π –æ–±–∑–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. **Redis Monitoring** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Redis
3. **Kafka Monitoring** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Kafka
4. **System Monitoring** - –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

## üîß –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose -f docker-compose.zero-downtime.yml ps

# –õ–æ–≥–∏ Prometheus
docker logs dating_app_prometheus

# –õ–æ–≥–∏ Grafana
docker logs dating_app_grafana

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
docker-compose -f docker-compose.zero-downtime.yml restart prometheus grafana
```

## üìã –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### HTTP –º–µ—Ç—Ä–∏–∫–∏
- `http_requests_total` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- `http_request_duration_seconds` - –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞

### –ë–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏
- `matches_total` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ç—á–µ–π
- `fast_matches_total` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ fast matches
- `active_users_total` - –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### Kafka –º–µ—Ç—Ä–∏–∫–∏
- `kafka_messages_produced_total` - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `kafka_messages_consumed_total` - –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤

–î–∞—à–±–æ—Ä–¥—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Grafana –∏–∑ –ø–∞–ø–∫–∏ `grafana/provisioning/dashboards/`.

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –¥–∞—à–±–æ—Ä–¥–∞:
1. –°–æ–∑–¥–∞–π—Ç–µ JSON —Ñ–∞–π–ª –≤ `grafana/provisioning/dashboards/`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Grafana
3. –î–∞—à–±–æ—Ä–¥ –ø–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üîî –ê–ª–µ—Ä—Ç—ã

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –≤ Prometheus
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `prometheus/rules.yml` —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∞–ª–µ—Ä—Ç–æ–≤.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –≤ Grafana
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å –¥–∞—à–±–æ—Ä–¥–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Alert" tab
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É—Å–ª–æ–≤–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `prometheus/prometheus.yml`

### Grafana –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Prometheus
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ datasource
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Prometheus –∑–∞–ø—É—â–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—É—é —Å–≤—è–∑–Ω–æ—Å—Ç—å

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [docs/monitoring-setup.md](docs/monitoring-setup.md)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è Grafana
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞

---

**üéâ –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** 